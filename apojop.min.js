/*! apojop - v1.0.3-beta - 2013-10-18
* https://github.com/lorem--ipsum/apojop
* Copyright (c) 2013 Lorem Ipsum  Licensed ,  */
angular.module("apojop",["apojop.utils"]).filter("pretty",["prettils",function(a){return function(b,c,d){return c=void 0===c?2:+c,"columns"===d?a.columns(b,c,"  "):a.levels(b,c,"  ")}}]),angular.module("apojop.utils",[]).factory("check",function(){return{primitive:function(a){return angular.isDate(a)?!0:null===a||void 0===a?!0:-1!==["string","number","function","boolean"].indexOf(typeof a)}}}).factory("$length",["format","check",function(a,b){return{of:function(c){if(b.primitive(c))return a.primitive(c).raw.length;var d=[];if(angular.isArray(c))for(var e=0;e<c.length;e++)d.push(this.of(c[e]));else for(var f in c)d.push(a.key(f).raw.length+this.of(c[f]));return d.reduce(function(a,b){return a+b},0)+2+2*d.length}}}]).factory("format",function(){return{color:function(a,b){return'<span style="'+(b?"color: "+b+";":"")+'">'+a+"</span>"},key:function(a){return{colored:this.color(a,"#B919A8")+": ",raw:a+": "}},primitive:function(a){var b="",c="";return angular.isDate(a)?this.date(a):(null===a&&(c=this.color("null","green"),b="null"),void 0===a&&(c=this.color("undefined","green"),b="undefined"),"string"==typeof a&&(c=this.color('"'+a+'"',"red"),b='"'+a+'"'),"number"==typeof a&&(c=this.color(a,"blue"),b=""+a),"function"==typeof a&&(c=this.color(a.toString(),""),b=a.toString()),"boolean"==typeof a&&(c=this.color(a.toString(),"green"),b=a.toString()),{raw:b,colored:c})},date:function(a){return{colored:this.color("new","green")+" Date("+this.primitive(a.getTime()).colored+")",raw:"new Date("+this.primitive(a.getTime()).raw+")"}}}}).factory("prettils",["format","check","$length",function(a,b,c){return{levels:function(c,d,e){if(b.primitive(c))return a.primitive(c).colored;if(0===d)return this.flatten(c);var f=angular.isArray(c),g=[];if(f){for(var h=0;h<c.length;h++)g.push(e+this.levels(c[h],d-1,e+"  "));g=this.compactLines(g)}else for(var i in c)g.push(e+a.key(i).colored+this.levels(c[i],d-1,e+"  "));return e=e.replace(/.{2}$/,""),this.joinLines(g,f,e)},columns:function(d,e,f){if(b.primitive(d))return a.primitive(d).colored;if(c.of(d)<=e)return this.flatten(d);var g=angular.isArray(d),h=[];if(g){for(var i=0;i<d.length;i++)h.push(f+this.columns(d[i],e,f+"  "));h=this.compactLines(h)}else for(var j in d)h.push(f+a.key(j).colored+this.columns(d[j],e,f+"  "));return f=f.replace(/.{2}$/,""),this.joinLines(h,g,f)},joinLines:function(a,b,c){var d=(b?"[":"{")+"\n";return d+=a.join(",\n").replace(/\s(\(x\d+\))(,)?\n/g,"$2 $1\n")+"\n",d+=c+(b?"]":"}")},compactLines:function(a){for(var b=0,c=[a[0]],d=1;d<a.length;d++)a[d]!==a[d-1]?(b>0&&(c[c.length-1]=c[c.length-1]+" (x"+(b+1)+")",b=0),c.push(a[d])):b++;return b>0&&(c[c.length-1]=c[c.length-1]+" (x"+(b+1)+")",b=0),c},flatten:function(c){if(b.primitive(c))return a.primitive(c).colored;var d=angular.isArray(c),e=[];if(d)for(var f=0;f<c.length;f++)e.push(this.flatten(c[f]));else for(var g in c)e.push(a.key(g).colored+this.flatten(c[g]));return(d?"[":"{")+e.join(", ")+(d?"]":"}")}}}]);